@inject NavigationManager NavigationManager
@using SherpaFrontEnd.Core.NavMenu

@inherits LayoutComponentBase

<div class="page">
    <AuthorizeView>
        <Authorized>
            <CookiesPopup />
            <div class="bg-primary-dark-principal pl-4 sidebar">
                <NavMenu/>
            </div>

            <div class="flex flex-col flex-1">
                <div class="flex gap-8 px-8 flex-row-reverse py-6 bg-gray-white border-b border-primary-dark-100">
                    <LoginDisplay/>
                </div>
                <main class="m-0 px-8 flex flex-1 flex-col pt-10 pb-0 bg-gray-100">
                    @Body
                </main>
            </div>
        </Authorized>
        <NotAuthorized>
            <div class="flex justify-center items-center w-screen h-screen">
                <div class="flex flex-col items-center gap-2">
                    <p>You're logged out</p>
                    <button class="btn btn-primary" @onclick="RedirectToLogin">Log in</button>
                </div>
            </div>
        </NotAuthorized>
        <Authorizing>
            <div class="flex justify-center items-center w-screen h-screen">
                <Spinner/>
            </div>
        </Authorizing>
    </AuthorizeView>
</div>

@code
{
    private async Task RedirectToLogin()
    {
        NavigationManager.NavigateTo("authentication/login");
    }
}